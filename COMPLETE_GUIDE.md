# 📦 חבילת ניתוח מכירות בית קפה - מדריך מקיף

## 📋 תוכן העניינים
1. [סקירה כללית](#סקירה-כללית)
2. [קבצים בפרויקט](#קבצים-בפרויקט)
3. [התקנה ושימוש](#התקנה-ושימוש)
4. [תכונות הדשבורד](#תכונות-הדשבורד)
5. [דוגמאות שימוש](#דוגמאות-שימוש)
6. [פתרון בעיות](#פתרון-בעיות)

---

## 🎯 סקירה כללית

חבילה מקיפה לניתוח נתוני מכירות בית קפה ל-90 ימי עבודה. 
הפרויקט כולל כלים להמרת נתונים, ניתוח אוטומטי, וויזואליזציה אינטראקטיבית.

**מטרות הפרויקט:**
- 📊 זיהוי מוצרים מצליחים וחלשים
- 💰 ניתוח רווחיות והכנסות
- 🎯 המלצות לקידום מוצרים
- 📈 ניתוח פארטו (80/20)
- 🔍 תובנות עסקיות מעמיקות

---

## 📁 קבצים בפרויקט

### 1. `cafe_dashboard.py` ⭐ (הקובץ המרכזי)
**דשבורד אינטראקטיבי בנוי עם Streamlit**

**תכונות:**
- 5 טאבים לניתוחים שונים
- גרפים אינטראקטיביים עם Plotly
- תמיכה מלאה בעברית (RTL)
- KPIs ומדדים עסקיים
- ניתוח פארטו (ABC)
- מטריצת BCG לקידום מוצרים
- ייצוא נתונים ל-CSV

**איך להריץ:**
```bash
streamlit run cafe_dashboard.py
```

### 2. `html_to_excel.py`
**המרת קבצי HTML (מקבלות/חשבוניות) ל-Excel**

**שימושים:**
- המרת קבצי HTML עם div tables
- חילוץ נתוני מכירות מקבלות
- ניקוי והמרת נתונים לפורמט Excel

**דוגמה:**
```bash
python html_to_excel.py קבלות.html נתוני_מכירות.xlsx
```

### 3. `add_categories.py`
**הוספת קטגוריות אוטומטית למוצרים**

**מצבי עבודה:**
- **אוטומטי**: סיווג אוטומטי לפי מילות מפתח
- **אינטראקטיבי**: תיקון ידני של קטגוריות

**קטגוריות נתמכות:**
- קפה חם, קפה קר
- תה, משקאות קרים
- מאפים, עוגות, מתוקים
- ארוחות, כלים
- אבקות ותה

**שימוש:**
```bash
python add_categories.py נתוני_מכירות.xlsx
```

### 4. `create_example_data.py`
**יצירת נתוני דוגמה לבדיקה**

מייצר קובץ Excel עם ~30 מוצרים וקטגוריות למטרות התנסות.

```bash
python create_example_data.py
```

### 5. `requirements.txt`
רשימת ספריות Python נדרשות:
- streamlit
- pandas
- plotly
- numpy
- openpyxl

### 6. מדריכים
- `README.md` - תיעוד מפורט
- `QUICKSTART.md` - התחלה מהירה

---

## 🚀 התקנה ושימוש

### התקנה ראשונית (פעם אחת)

```bash
# 1. התקנת ספריות
pip install -r requirements.txt

# 2. אם יש בעיות:
pip install --upgrade pip
pip install -r requirements.txt --upgrade
```

### תהליך עבודה טיפוסי

#### תרחיש 1: יש לך קובץ HTML
```bash
# שלב 1: המרה ל-Excel
python html_to_excel.py קבלות.html נתוני_קפה.xlsx

# שלב 2: הוספת קטגוריות (אם צריך)
python add_categories.py נתוני_קפה.xlsx

# שלב 3: הפעלת הדשבורד
streamlit run cafe_dashboard.py

# שלב 4: העלה את הקובץ בדשבורד
```

#### תרחיש 2: יש לך Excel מוכן
```bash
# הפעל ישירות את הדשבורד
streamlit run cafe_dashboard.py

# העלה את הקובץ בממשק
```

#### תרחיש 3: רוצה לנסות עם דוגמה
```bash
# צור נתוני דוגמה
python create_example_data.py

# הפעל דשבורד
streamlit run cafe_dashboard.py

# העלה cafe_data_example.xlsx
```

---

## 📊 תכונות הדשבורד

### טאב 1: מבט על 👀
**מדדי KPI ראשיים:**
- סה"כ הכנסות
- ממוצע יומי
- סה"כ פריטים נמכרו
- ממוצע מחיר למנה
- מספר מוצרים

**ויזואליזציות:**
- גרף עוגה: התפלגות הכנסות לפי קטגוריה
- גרף עמודות: כמויות נמכרו לפי קטגוריה
- טבלה: סטטיסטיקות מפורטות לפי קטגוריה

### טאב 2: מוצרים מובילים 🏆
**ניתוחים:**
- טופ 15 מוצרים בהכנסות (עם פילוח לפי קטגוריה)
- טופ 15 מוצרים בכמות
- מוצרים בעלי ביצועים נמוכים (תחתית 10%)

**תובנות:**
- זיהוי המוצרים המצליחים ביותר
- מציאת מוצרים עם פוטנציאל לשיפור
- המלצות להסרת מוצרים חלשים

### טאב 3: ניתוח פארטו 📈
**עקרון 80/20:**
גרף פארטו מציג את המוצרים לפי תרומה מצטברת להכנסות.

**סיווג ABC:**
- **A (20%)**: מייצרים 80% מההכנסות → שמור והשקע
- **B (30%)**: מייצרים 15% מההכנסות → שמור ומטב
- **C (50%)**: מייצרים 5% מההכנסות → שקול הסרה

**תכונות:**
- גרף משולב (עמודות + קו מצטבר)
- סינון לפי סיווג ABC
- טבלה מפורטת עם אחוזי תרומה

### טאב 4: המלצות לקידום 🎯
**מטריצת BCG מותאמת:**

| ביקוש/רווחיות | רווחיות גבוהה | רווחיות נמוכה |
|---------------|---------------|---------------|
| **ביקוש גבוה** | ⭐ כוכבים<br>המשך להשקיע | 🐄 פרות מזומנים<br>אופטימיזציה |
| **ביקוש נמוך** | ❓ סימני שאלה<br>קידום אגרסיבי | 🐕 כלבים<br>שקול הסרה |

**המלצות אוטומטיות:**
1. מוצרים מומלצים לקידום (מחיר גבוה + ביקוש נמוך)
2. מוצרים לשקול הסרה (מכירה < 0.5 ליום + מחיר נמוך)

### טאב 5: טבלת נתונים 📋
**תכונות:**
- סינון לפי קטגוריה
- מיון לפי כל עמודה
- הצגת כל הנתונים המעובדים
- ייצוא ל-CSV

**עמודות:**
- תאור, קטגוריה
- כמות, סכום כולל מע"מ
- מחיר למנה
- אחוז מההכנסות
- כמות ליום ממוצעת
- סיווג ABC

---

## 💡 דוגמאות שימוש

### דוגמה 1: זיהוי מוצרים לקידום
**תרחיש:** רוצה למצוא מוצרים יקרים שלא נמכרים מספיק

1. פתח טאב "המלצות לקידום"
2. עבור לקטגוריית "סימני שאלה" ❓
3. מוצרים אלו בעלי רווחיות גבוהה אך ביקוש נמוך
4. **פעולות מומלצות:**
   - צור מבצע 2+1
   - שלב עם מוצר פופולרי (combo)
   - שיפור מיקום בתפריט
   - קמפיין ברשתות חברתיות

### דוגמה 2: אופטימיזציה של תפריט
**תרחיש:** רוצה לפשט את התפריט ולהסיר מוצרים חלשים

1. פתח טאב "מוצרים מובילים"
2. גלול ל"מוצרים בעלי ביצועים נמוכים"
3. מוצרים עם כמות_ליום < 0.5 = נמכר פחות מפעם ביומיים
4. **קריטריונים להסרה:**
   - מחיר נמוך + מכירות נמוכות
   - מורכבות הכנה גבוהה
   - מרכיבים יקרים/נדירים

### דוגמה 3: תכנון מלאי
**תרחיש:** רוצה לדעת כמה לקנות מכל מוצר

1. פתח טאב "טבלת נתונים"
2. מיין לפי "כמות_ליום"
3. **חישוב:**
   - מוצר עם ממוצע 10 ליום
   - מלאי לשבוע = 10 × 7 = 70 יחידות
   - הוסף 20% מרווח ביטחון = 84 יחידות

### דוגמה 4: קביעת מחירים
**תרחיש:** רוצה להעלות מחירים ללא פגיעה במכירות

1. פתח טאב "מבט על"
2. בדוק ממוצע מחיר למנה בקטגוריה
3. פתח טאב "מוצרים מובילים"
4. **אסטרטגיה:**
   - מוצרי "כוכבים" ⭐: אפשר העלאה של 10-15%
   - מוצרי "פרות מזומנים" 🐄: העלאה זהירה 5-10%
   - מוצרי "סימני שאלה" ❓: אל תעלה! קדם במקום
   - מוצרי "כלבים" 🐕: לא משנה, שקול הסרה

---

## 🔧 פתרון בעיות

### בעיה: "No module named 'streamlit'"
**פתרון:**
```bash
pip install streamlit
# או
pip install -r requirements.txt
```

### בעיה: "No tables found" ב-HTML
**פתרון:**
הנתונים בקובץ HTML לא בפורמט `<table>` אלא `<div>`.
השתמש ב-`html_to_excel.py` במקום `pd.read_html()`.

### בעיה: הדשבורד לא נפתח
**פתרון:**
```bash
# בדוק שהפורט 8501 פנוי
# או הרץ עם פורט אחר:
streamlit run cafe_dashboard.py --server.port 8502
```

### בעיה: טקסט עברית מקולקל
**פתרון:**
וודא שהקובץ נשמר עם encoding UTF-8:
```python
df.to_excel('file.xlsx', encoding='utf-8-sig')
```

### בעיה: שגיאת encoding בקריאת HTML
**פתרון:**
```python
# ב-html_to_excel.py, שנה ל:
with open(file, 'r', encoding='utf-8') as f:
# או נסה:
with open(file, 'r', encoding='windows-1255') as f:
```

### בעיה: הדשבורד איטי
**פתרון:**
- הפחת את מספר המוצרים בגרף פארטו (משורה 30 ל-20)
- השתמש ב-`st.cache_data` (כבר מיושם)
- סגור טאבים אחרים בדפדפן

---

## 📈 טיפים מתקדמים

### 1. אוטומציה שבועית
```bash
# צור סקריפט run_weekly.sh:
#!/bin/bash
cd /path/to/project
python html_to_excel.py data/receipts_$(date +%Y%m%d).html data/weekly_data.xlsx
streamlit run cafe_dashboard.py
```

### 2. שילוב עם Google Sheets
```python
# התקן:
pip install gspread oauth2client

# קוד לדוגמה:
import gspread
df.to_csv('temp.csv')
# העלה ל-Google Sheets...
```

### 3. ייצוא דוחות PDF
```bash
# התקן:
pip install pdfkit wkhtmltopdf

# בדשבורד, הוסף:
st.button("ייצוא ל-PDF")
```

### 4. התראות אוטומטיות
```python
# אם מוצר יורד מתחת לסף:
if product['כמות_ליום'] < 0.3:
    send_email_alert(product['תאור'])
```

---

## 📞 תמיכה ועדכונים

**שאלות נפוצות:**
1. ניתן להריץ את הדשבורד על שרת? כן! השתמש ב-Streamlit Cloud
2. האם תומך במספר תקופות? כרגע לא, אבל אפשר להוסיף
3. ניתן לשתף את הדשבורד? כן, העלה ל-Streamlit Cloud והפוך לציבורי

**רעיונות להרחבות:**
- הוספת עמודת תאריך לניתוח מגמות
- השוואה בין תקופות
- ניבוי מכירות (ML)
- ניתוח לפי שעות היום
- אינטגרציה עם מערכת הקופה

---

## 🎓 למידה נוספת

**Streamlit:**
- https://docs.streamlit.io

**Plotly:**
- https://plotly.com/python/

**Pandas:**
- https://pandas.pydata.org/docs/

**ניתוח עסקי:**
- מטריצת BCG
- ניתוח פארטו
- ABC Analysis

---

**גרסה:** 1.0  
**תאריך:** נובמבר 2025  
**נוצר עבור:** ניתוח מכירות בית קפה - 90 ימי עבודה

בהצלחה! ☕📊

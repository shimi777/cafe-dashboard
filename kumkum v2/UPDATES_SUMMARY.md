# 🎯 עדכונים חדשים - דשבורד עמידה ביעדים

## ✨ תכונות שהוסיפו

### 1️⃣ **טעינת מספר קבצים HTML** 📁
- **לפני:** יכול להעלות רק קובץ HTML אחד
- **עכשיו:** טעינת מספר קבצים בו זמנית
- **תוצאה:** הנתונים מכל הקבצים מצטברים לניתוח אחד

**דוגמא:**
```
בחר:
- sales_week1.html (הכנסה ₪28,500)
- sales_week2.html (הכנסה ₪31,200)
- sales_week3.html (הכנסה ₪29,800)
- sales_week4.html (הכנסה ₪30,500)

סיכום חודשי = ₪120,000
```

---

### 2️⃣ **תצוגה שבועית דינמית** 📅
- **בחר שבוע נפרד** מהרשימה
- **יעד שבועי** לכל קטגוריה
- **יעד הכנסות שבועי** (₪ נפרד לכל שבוע)
- **השוואה בין שבועות** - עבור בין שבועות בקלות

**דוגמא:**
```
שבוע 1: 7 טוסטים (יעד: 9) = 78%
שבוע 2: 9 טוסטים (יעד: 9) = 100% ✅
שבוע 3: 8 טוסטים (יעד: 9) = 89%
שבוע 4: 6 טוסטים (יעד: 9) = 67%
```

---

### 3️⃣ **תצוגה חודשית משולבת** 📊
- **סיכום חודשי מצטבר** של כל השבועות
- **יעד קטגוריה חודשי** (4x היעד השבועי)
- **יעד הכנסות חודשי** (₪130,000)
- **גרף השוואה** - ראה התקדמות כללית

**דוגמא:**
```
טוסט אבוקדו:
- שבוע 1: 7 יחידות
- שבוע 2: 9 יחידות
- שבוע 3: 8 יחידות
- שבוע 4: 6 יחידות
= סה"כ 30 יחידות (יעד: 36) = 83%
```

---

### 4️⃣ **יעדים דינמיים משופרים** ⚙️
- **יעדי קטגוריה שבועיים** - עדכן בנפרד
- **יעדי קטגוריה חודשיים** - עדכן בנפרד
- **יעד הכנסות שבועי** - עדכן בנפרד
- **יעד הכנסות חודשי** - עדכן בנפרד
- **יעד אירועים חודשי** - עדכן בנפרד

---

## 🎨 הצגה ויזואלית

### סרגלי התקדמות:
- **ירוק** 🟢 = יעד הושג (100%+)
- **צהוב** 🟡 = קרוב ליעד (80-99%)
- **אדום** 🔴 = עדיין בעתיד (פחות מ-80%)

### גרפים:
- **שבועי:** גרף להשוואת היעד לביצוע בשבוע נוכחי
- **חודשי:** גרף להשוואת היעד לביצוע של החודש המצטבר

---

## 📋 שינויים בקוד

### קובץ: `app.py`

**שינויים עיקריים:**

1. **Imports** (שורה 1-7):
   - נוסף: `from datetime import datetime` - לטיפול בתאריכים

2. **File Upload** (שורה 24-52):
   ```python
   # לפני:
   uploaded_file = st.sidebar.file_uploader(...)
   if uploaded_file is not None:
   
   # עכשיו:
   uploaded_files = st.sidebar.file_uploader(..., accept_multiple_files=True)
   if uploaded_files and len(uploaded_files) > 0:
   ```

3. **Data Processing** (שורה 31-60):
   ```python
   # לפני: עיבוד קובץ אחד
   
   # עכשיו: לולאה על מספר קבצים
   for uploaded_file in uploaded_files:
       file_transactions = parse_html_transactions(html_content)
       all_transactions.extend(file_transactions)
   ```

4. **Week Calculation** (שורה 56-61):
   ```python
   # נוסף: חישוב שבוע לכל עסקה
   trans_df['Week'] = trans_df['Date'].apply(...)
   trans_df['WeekStart'] = trans_df['Date'].apply(...)
   trans_df['MonthYear'] = trans_df['Date'].apply(...)
   ```

5. **Goals Dashboard** (שורה 375-670):
   - **Initialize Session State** (שורה 380-398)
   - **Sidebar Settings** (שורה 400-432)
   - **Week/Month Selection** (שורה 437-468)
   - **Dynamic Category Progress** (שורה 473-508)
   - **Revenue Goals** (שורה 531-581)
   - **Events Goals** (שורה 584-603)
   - **Monthly Aggregation** (שורה 633-730)

---

## 🔄 זרימת הנתונים

```
+------------------+
|  Multiple HTML   |
|  Files Upload    |
+--------+---------+
         |
         v
+------------------+
| Parse each file  |
| & aggregate all  |
| transactions     |
+--------+---------+
         |
         v
+------------------+
| Add Week/Month   |
| calculations     |
+--------+---------+
         |
    +----+----+
    |         |
    v         v
 WEEKLY    MONTHLY
 Goals     Goals
 (choose   (choose
  week)    month)
    |         |
    +----+----+
         |
         v
+------------------+
| Display Results  |
| + Charts + Tables|
+------------------+
```

---

## 📊 דוגמה מלאה - עמידה ביעדים דצמבר

### **קבצים שהעלינו:**
- `sales_01-07dec.html` (שבוע 1)
- `sales_08-14dec.html` (שבוע 2)
- `sales_15-21dec.html` (שבוע 3)
- `sales_22-28dec.html` (שבוע 4)

### **תצוגה שבועית - בחרנו שבוע 2:**
```
🎯 עמידה ביעדים לפי קטגוריה (שבוע: 2024-12-08)

טוסט אבוקדו:          יעד: 9   |  בפועל: 9    |  ✅ 100%
כריך סלמון:          יעד: 9   |  בפועל: 8    |  89%
מגדל מגדנות אליזבט:  יעד: 9   |  בפועל: 7    |  78%
סקונס יחיד:          יעד: 20  |  בפועל: 19   |  95%

💰 עמידה ביעד הכנסות (שבוע: 2024-12-08)
יעד שבועי: ₪30,000  |  הכנסה בתקופה: ₪31,200  |  ✅ 104%

🎉 יעד מספר אירועים חודשי
יעד אירועים: 10  |  אירועים בתקופה: 8  |  80%
```

### **סיכום חודשי מצטבר:**
```
סיכום חודשי מצטבר (כל השבועות)

טוסט אבוקדו:          יעד: 36  |  בפועל: 33   |  92%
כריך סלמון:          יעד: 36  |  בפועל: 31   |  86%
מגדל מגדנות אליזבט:  יעד: 36  |  בפועל: 28   |  78%
סקונס יחיד:          יעד: 80  |  בפועל: 75   |  94%

💰 עמידה ביעד הכנסות (חודשי)
יעד חודשי: ₪130,000  |  הכנסה בפועל: ₪121,000  |  93%
```

---

## 🚀 איך להתחיל

### 1. הכן קבצי HTML
```
sales_week1.html
sales_week2.html
sales_week3.html
sales_week4.html
```

### 2. עלה לאפליקציה
1. פתח את ה-Streamlit Dashboard
2. לחץ "בחר קובץ/קבצי HTML"
3. בחר את כל הקבצים של החודש

### 3. בחר תצוגה
1. עבור לטאב "עמידה ביעדים"
2. בחר "שבועי" או "חודשי"
3. בחר שבוע או חודש

### 4. בדוק עדכן יעדים
1. בתפריט הצד, לחץ "⚙️ הגדרות יעדים"
2. לחץ "📝 עדכן יעדים"
3. עדכן את היעדים כרצונך

---

## 📁 קבצים שהשתנו

| קובץ | שינוי | הערות |
|------|-------|-------|
| `app.py` | עודכן לגמרי | הוסף תצוגה שבועית/חודשית וטעינת מרובים |
| `html_to_excel.py` | ללא שינוי | זוהה כמו קודם |
| `test_parser.py` | ללא שינוי | זוהה כמו קודם |
| `requirements.txt` | ללא שינוי | כל תלויות זהות |

---

## 📚 תיעוד נוסף

- **GOALS_DASHBOARD_README.md** - מדריך מלא של דשבורד היעדים
- **README.md** - מדריך כללי של המערכת
- **QUICK_START.md** - התחלה מהירה

---

## ✅ בדיקת ביצועים

```bash
# בדוק תחביר
python -m py_compile app.py

# הרץ את הטסטים
python test_parser.py

# הרץ את ה-Dashboard
streamlit run app.py
```

---

## 🎉 סיכום

✅ **יכולת טעינת מספר קבצים HTML**
✅ **תצוגת שבועות נפרדות עם החלפה קלה**
✅ **סיכום חודשי מצטבר מאוטומטי**
✅ **יעדים דינמיים שניתן לשנות**
✅ **גרפים וטבלאות לצפייה חזותית**
✅ **ממשק בעברית מלאה**

**המערכת מוכנה לשימוש מלא!** 🚀

# 🎯 מדריך לשימוש בלשונית "עמידה ביעדים"

## מה נוסף?

הוספתי לשונית חדשה **"עמידה ביעדים"** שמאפשרת לעקוב אחר 4 יעדים חודשיים ולהציג את אחוז העמידה בצורה ויזואלית!

---

## 📊 מה הלשונית מציגה?

### שורה עליונה: ביצועים בפועל
4 קלפים שמציגים את הביצוע בפועל לכל יעד, עם **חץ** שמראה את הפער מהיעד:
- 🟢 חץ ירוק למעלה = עברנו את היעד
- 🔴 חץ אדום למטה = מתחת ליעד

### שורה תחתונה: אחוז עמידה ביעד
4 קלפים צבעוניים עם אחוזים:
- 🟢 **רקע ירוק** = 100% ומעלה (עומדים ביעד!)
- 🔴 **רקע אדום** = מתחת ל-100% (לא עומדים ביעד)

### גרף עמודות
תצוגה גרפית של כל 4 היעדים עם קו יעד כחול על 100%

### טבלת פירוט
טבלה מלאה עם:
- ערך היעד
- ביצוע בפועל
- פער (חיובי/שלילי)
- אחוז עמידה
- סטטוס (✅/❌)

---

## 🚀 איך להשתמש?

### שלב 1: הכן קובץ נתונים חודשי

צור קובץ Excel **בדיוק באותו פורמט** כמו הקובץ הראשי:
```
תאור | כמות | סכום | סכום כולל מעמ | מחיר למנה | קטגוריה
```

**חשוב:** הקובץ הזה צריך להכיל **רק** את הנתונים של החודש הנוכחי/התקופה שאתה בודק!

**דוגמה:** אם אתה רוצה לבדוק עמידה ביעדים לחודש ינואר:
- צור קובץ `january_2025.xlsx`
- הכנס רק נתוני מכירות מינואר
- שמור בפורמט Excel

### שלב 2: הגדר את היעדים

בסייד-בר, תחת **"הגדרת יעדים חודשיים"**, הזן:

1. **יעד מגדלים:** מספר מגדלים/מאפינס שרוצים למכור (ברירת מחדל: 125)
2. **יעד טוסט אבוקדו + כריך סלמון:** מספר סנדוויצ'ים (ברירת מחדל: 100)
3. **יעד כוסות תה:** מספר כוסות תה (ברירת מחדל: 80)
4. **יעד הכנסות:** סכום בשקלים (ברירת מחדל: 110,000 ₪)

### שלב 3: העלה את הקבצים

1. **קובץ ראשי** (90 ימים) → להעלאה רגילה
2. **קובץ חודשי** → תחת "עמידה ביעדים" בסייד-בר

### שלב 4: צפה בתוצאות!

עבור ללשונית **"🎯 עמידה ביעדים"** (הלשונית הראשונה) וראה:
- ✅ אחוזי עמידה
- 📊 גרפים
- 📋 טבלת סיכום

---

## 💡 איך זה עובד מאחורי הקלעים?

### חיפוש מוצרים
המערכת מחפשת מוצרים לפי מילות מפתח:

**יעד 1 - מגדלים:**
- מחפש: "מגדל" או "מאפינס"
- דוגמאות: "מגדל שוקולד", "מאפינס וניל"

**יעד 2 - טוסט אבוקדו + כריך סלמון:**
- מחפש: "טוסט אבוקדו" או "כריך סלמון"

**יעד 3 - כוסות תה:**
- מחפש: "כוס תה" או "כוסות תה"

**יעד 4 - הכנסות:**
- סוכם את **כל** ההכנסות מעמודת "סכום כולל מעמ"

### חישוב אחוזים
```
אחוז עמידה = (ביצוע בפועל / יעד) × 100
```

**דוגמה:**
- יעד: 125 מגדלים
- מכרנו: 150 מגדלים
- אחוז עמידה: (150/125) × 100 = **120%** ✅

---

## 📝 דוגמה מלאה

### תרחיש: בדיקת עמידה ביעדים לשבוע 1 בינואר

**1. הכנת הקובץ:**
```bash
# יצא מהמערכת את נתוני שבוע 1 (1-7 בינואר)
# שמור כ week1_jan.xlsx
```

**2. הגדרת יעדים שבועיים:**
אם היעד החודשי הוא 125 מגדלים, אז יעד שבועי = 125/4 ≈ **31 מגדלים**

```
יעד מגדלים: 31
יעד טוסט+כריך: 25
יעד כוסות תה: 20
יעד הכנסות: 27,500 ₪ (110,000/4)
```

**3. הרצת הדשבורד:**
```bash
streamlit run cafe_dashboard_with_goals.py
```

**4. העלאת קבצים:**
- קובץ כללי: הנתונים של 90 הימים
- קובץ חודשי: `week1_jan.xlsx`

**5. תוצאות:**
```
מגדלים:        35 (113%) ✅
טוסט+כריך:     22 (88%)  ❌
כוסות תה:      25 (125%) ✅
הכנסות:    29,500 (107%) ✅
```

---

## 🎨 התאמה אישית

### שינוי שמות יעדים
אם אתה רוצה לעקוב אחר מוצרים אחרים, ערוך את הקוד:

```python
# שורה ~200 בקוד
muffins_actual, muffins_pct = calculate_goal_performance(
    df_monthly, ['מגדל', 'מאפינס'], goal_muffins  # ← שנה פה
)
```

**דוגמה:** במקום מגדלים, עקוב אחר קרואסונים:
```python
croissants_actual, croissants_pct = calculate_goal_performance(
    df_monthly, ['קרואסון', 'קרואסן'], goal_croissants
)
```

### שינוי צבעים
ברירת מחדל:
- 🟢 ירוק = 100% ומעלה
- 🔴 אדום = מתחת ל-100%

לשנות את הסף:
```python
# שורה ~250 בקוד
color = "🟢" if muffins_pct >= 90 else "🔴"  # ← שנה ל-90% במקום 100%
```

---

## ⚠️ טיפים חשובים

### 1. שמות מוצרים
וודא ששמות המוצרים בקובץ **תואמים** למילות החיפוש:
- ❌ "מופין שוקולד" (אנגלית) → לא יימצא
- ✅ "מגדל שוקולד" (עברית) → יימצא!

### 2. קובץ נתונים נקי
הקובץ החודשי חייב להיות:
- ✅ רק נתוני התקופה הרלוונטית
- ✅ אותו פורמט כמו הקובץ הראשי
- ✅ עם עמודת "קטגוריה"

### 3. יעדים ריאליסטיים
הגדר יעדים שאפשר להשיג:
- 📊 בדוק ביצועים היסטוריים
- 📈 הגדר יעד גבוה ב-10-20% מהממוצע
- 🎯 עדכן יעדים כל חודש

### 4. מעקב שוטף
- 📅 בדוק עמידה ביעדים **שבועית**
- 📊 השווה בין שבועות
- 🎯 התאם אסטרטגיה בהתאם

---

## 🔄 תרחישי שימוש נפוצים

### תרחיש 1: מעקב שבועי
```bash
# כל יום ראשון:
1. ייצא נתוני השבוע שעבר
2. שמור כ week_X.xlsx
3. הרץ דשבורד
4. העלה קובץ שבועי
5. בדוק תוצאות
6. שתף עם הצוות
```

### תרחיש 2: סיכום חודשי
```bash
# סוף החודש:
1. ייצא את כל נתוני החודש
2. הרץ דשבורד עם הקובץ החודשי
3. צור דוח HTML: python export_html_report.py
4. שלח לבעל העסק
```

### תרחיש 3: תיקון מסלול
```bash
# באמצע החודש:
1. בדוק עמידה ביעדים
2. זהה יעדים שלא עומדים בהם (אדומים)
3. תכנן פעולות קידום
4. בדוק שוב אחרי שבוע
```

---

## 📊 פורמט קובץ Excel

הקובץ החודשי צריך להיראות כך:

| תאור | כמות | סכום | סכום כולל מעמ | מחיר למנה | קטגוריה |
|------|------|------|---------------|-----------|----------|
| מגדל שוקולד | 45 | 450 | 526.5 | 11.7 | מאפים |
| טוסט אבוקדו | 32 | 640 | 748.8 | 23.4 | ארוחות |
| כוס תה ירוק | 28 | 336 | 393.1 | 14.0 | משקאות |
| ... | ... | ... | ... | ... | ... |

---

## 🎉 סיכום

עכשיו יש לך:
- ✅ מעקב אחר 4 יעדים מרכזיים
- ✅ תצוגה ויזואלית ברורה (ירוק/אדום)
- ✅ גרפים וטבלאות מפורטות
- ✅ עדכון קל - פשוט להעלות קובץ חדש

**הרץ את הדשבורד:**
```bash
streamlit run cafe_dashboard_with_goals.py
```

**בהצלחה! 🎯☕**
